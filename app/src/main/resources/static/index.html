<!doctype html>
<html>
<head>
    <meta charset="utf-8"/>
    <title>Order Demo</title>
    <style>body{font-family:system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; margin:40px;}</style>
</head>
<body>
<h1>RocketMQ Order Demo</h1>
<section>
    <h3>Create Order</h3>
    <input id="amount" type="number" value="99.99" step="0.01"/>
    <button onclick="create()">Create</button>
</section>
<section>
    <h3>Pay & Ship</h3>
    <input id="oid" placeholder="orderId"/>
    <button onclick="pay()">Pay</button>
    <button onclick="ship()">Ship</button>
</section>
<pre id="out"></pre>
<script>
    async function create(){
        const amount = parseFloat(document.getElementById('amount').value);
        const res = await fetch('/api/orders', {method:'POST', headers: {'Content-Type':'application/json'}, body: JSON.stringify({amount})});
        document.getElementById('out').textContent = await res.text();
    }
    async function pay(){
        const oid = document.getElementById('oid').value;
        const res = await fetch('/api/orders/'+encodeURIComponent(oid)+'/pay', {method:'POST'});
        document.getElementById('out').textContent = await res.text();
    }
    async function ship(){
        const oid = document.getElementById('oid').value;
        const res = await fetch('/api/orders/'+encodeURIComponent(oid)+'/ship', {method:'POST'});
        document.getElementById('out').textContent = await res.text();
    }
</script>
</body>
</html>
